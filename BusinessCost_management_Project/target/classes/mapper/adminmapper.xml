<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<!-- 네이스페이스의 기준은 패키지의 기준이다. = DTO를 설정해주는게 좋다. -->
<mapper namespace="woo.cost.mgmt.admin.model.adminDTO">

<!-- 나랑 회사가 같은 사람들만 리스트로 볼수 있게 한다. -->
 <select id="adminSelectAll" parameterType="adminDTO" resultType="adminDTO">
select 
	adminnum, company, adminname, adminbirthday, jobmanager, businesstype, 
    adminphonenum, userid, password
from 
	tbl_adminmember
<!-- where 
	company = #{company} -->
 </select>
 
 <!-- 같은 회사안에서도 담당자의 정보를 상세하게 확인할수 있다. -->
 <!-- 이건 jsp에서 하기 세션스코프세션아이디와 같아야지만 샐랙트디테일들어올수 있음-->
 <select id="adminSelectDetail" parameterType="adminDTO" resultType="adminDTO">
select 
	adminNum, company, adminName, to_char(adminBirthday, 'yyyy-mm-dd')adminBirthday, jobManager, businessType, 
    adminPhonenum, userID, password
from 
	tbl_adminmember
where 
	userID = #{userID}
 </select>

<!-- 담당자 회원가입 -->
 <insert id="adminInsert" parameterType="adminDTO">
 insert 
 	into tbl_adminmember(
 		adminNum, company, adminName, adminBirthday, jobManager, businessType, 
    	adminPhonenum, userID, password)
    valus(
    	(select max(adminNum)+1 as adminNum from tbl_adminmember),
   		 #{company}, #{adminName}, #{adminBirthday}, #{jobManager}, #{businessType}, 
   		 #{adminPhonenum}, #{userID}, #{password})
 </insert>
 
<!-- 회원정보 수정 -->
 <update id="adminUpdate" parameterType="adminDTO">
update 
	tbl_adminmember
	set
		company, adminName, adminBirthday, jobManager, businessType, 
    	adminPhonenum, password
	where 
	userID = #{userID}
</update>

<!-- 담당자 인원 카운트하기 -->
<select id="adminCount" resultType="int">
select 
	count(*) 
from 
	tbl_adminmember
<!-- where 
	company = #{company} -->
 </select>

</mapper>